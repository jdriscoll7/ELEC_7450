close all; clear;

% Samford image.
scale = 2;
beta = 0.75;
max_iterations = 3;
sigma = 0.01;
noise = sigma;

lr_test = double(imread('test_images/samford.PNG'));
lr_test_noisy = lr_test + noise*rand(size(lr_test));


% Display the original HR image, LR image, bicubic upsampling, and SR_CBM3D output.
figure;
subplot(221); imagesc(uint8(lr_test)); title(['Original Image - PSNR: ', psnr()]);
subplot(222); imagesc(uint8(lr_test_noisy)); title('Noisy Image');
subplot(223); imagesc(uint8(imresize(lr_test_noisy, scale, 'bicubic'))); title('Bicubic Interpolation');
subplot(224); imagesc(SR_CBM3D(lr_test_noisy, scale, 10, beta, max_iterations)); title('SR\_CBM3D Interpolation');



% Butterfly wings.
hr_test = imread('test_images/test_bw.PNG');
scale = 8;
beta = 1.75;
max_iterations = 3;
sigma = 10;

% LR image from HR image
lr_test = imresize(hr_test, 1/scale, 'bicubic');

% Display the original HR image, LR image, bicubic upsampling, and SR_CBM3D output.
figure; 
subplot(221); imagesc(hr_test); title('Original HR Image');
subplot(222); imagesc(lr_test); title('LR Image');
subplot(223); imagesc(imresize(lr_test, scale, 'bicubic')); title('Bicubic Interpolation');
subplot(224); imagesc(SR_CBM3D(lr_test, scale, sigma, beta, max_iterations)); title('SR\_CBM3D Interpolation');
